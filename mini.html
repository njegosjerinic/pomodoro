<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <title>Pomodoro</title>
</head>
<body>
    <div id="overlay" class="overlay">
        <div class="settings-screen">         
            <div class="exit-container">
                <h3>SETTINGS</h3>
                <button id="exit-settings">&#10005;</button>
            </div>
            <div class="time-input">
                <div class="input-title">
                    <h3>TIMER</h3>
                    <strong>Time(minutes)</strong>
                </div>
                <div class="inputs-container">
                    <div class="input-box">
                        <p>Pomodoro</p>
                        <input type="number" id="timeInput" value="30">
                    </div>
                    <div class="input-box">
                        <p>Break</p>
                        <input type="number" id="timeRestInput" value="10">
                    </div>
                    <div class="input-box">
                        <p>Long Break</p>
                        <input type="number" id="longBreakTimeInput" value="25">
                    </div>
                </div>
                <div class="timer-toggles">
                    <div class="auto-breaks">
                        <strong>Auto Start Breaks</strong>
                        <label class="switch">
                            <input type="checkbox" name="" id="autoStartBreaksSlider">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="auto-start-pomodoros">
                        <strong>Auto Start Pomodoros</strong>
                        <label class="switch">
                            <input type="checkbox" name="" id="autoStartPomodorosSlider">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="long-break-interval">
                        <strong>Long Break Intervals</strong>
                        <input type="number" value="4" id="longBreakIntervalInput">
                    </div>
                </div>
            </div>
            <div class="task-settings">
                <div class="input-title">
                    <h3>TASK</h3>
                </div>
                <div class="auto-check-tasks">
                    <strong>Auto Checks Tasks</strong>
                    <label class="switch">
                            <input type="checkbox" name="" id="autoCheckTasks">
                            <span class="slider round"></span>
                    </label>
                </div>
                <div class="auto-switch-tasks">
                    <strong>Auto Switch Tasks</strong>
                    <label class="switch">
                            <input type="checkbox" name="" id="autoSwitchTasks">
                            <span class="slider round"></span>
                    </label>
                </div>
            </div>
            <div class="sound-settings">
                <div class="input-title">
                    <h3>SOUND</h3>
                </div>
                <div class="alarm-settings">
                    <strong>Alarm Sound</strong>
                    <div class="alarm-slider-container">
                        <select name="alarm-sounds" id="alarmSounds">
                            <option value="kitchen">Kitchen</option>
                            <option value="bell">Bell</option>
                        </select>
                        <div class="sliders">
                            <input type="range" min="1" max="100" value="50" class="alarm-slider" id="alarmVolumeSlider">
                            <p id="alarmValue"></p>
                        </div>
                        <div class="repeat-alarm-container">
                            <span>repeat</span>
                            <input type="number" class="repeat-alarm" value="1" id="repeatAlarmInput">
                        </div>
                    </div>
                </div>
                <div class="ticking-settings">
                    <strong>Ticking Sound</strong>
                    <div class="ticking-slider-container">
                        <select name="ticking-sound" id="tickingSounds">
                            <option value="none">None</option>
                            <option value="ticking-fast">Ticking Fast</option>
                            <option value="ticking-slow">Ticking Slow</option>
                        </select>
                        <div class="sliders">
                            <input type="range" min="1" max="100" value="50" class="ticking-slider" id="tickingVolumeSlider">
                            <p id="tickingValue"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="theme-settings">
                <div class="input-title">
                    <h3>THEME</h3>
                </div>
                <div class="color-themes">
                    <strong>Color Themes</strong>
                    <div class="bckg-colors">
                        <div class="working-color-selection" id="workingColor"></div>
                        <div class="shortbreak-color-selection" id="shortbreakColor"></div>
                        <div class="longbreak-color-selection" id="longbreakColor"></div>
                    </div>
                </div>
                <div class="hour-format">
                    <strong>Hour Format</strong>
                    <select name="hour-format-selection" id="hourFormatSelection">
                        <option value="24-hour">24-hour</option>
                        <option value="12-hour">12-hour</option>
                    </select>
                </div>
                <div class="dark-mode">
                    <strong>Dark Mode when running</strong>
                    <label class="switch">
                            <input type="checkbox" name="" id="darkMode">
                            <span class="slider round"></span>
                    </label>
                </div>
                <div class="small-window-container">
                    <strong>Small Window</strong>
                    <button id="smallWindowOpenBtn">Open</button>
                </div>
            </div>
            <div class="input-button-container">
                    <button id="inputTimeBtn">OK</button>
            </div>
        </div>
        <div class="color-selector-container">
            <div id="colorPickerWindow" class="color-selector" >
                <div class="color-title">Pick a color for <p id="colorTitleUse"></p></div>
                <div class="color" data-color="rgb(186,73,73)" onclick="colorSelectorDivs(this)" style="background-color: rgb(186,73,73); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="rgb(56 133 138)" onclick="colorSelectorDivs(this)" style="background-color: rgb(56 133 138); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="rgb(57 112 151)" onclick="colorSelectorDivs(this)" style="background-color: rgb(57 112 151); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="rgb(155,130,56)" onclick="colorSelectorDivs(this)" style="background-color: rgb(155,130,56); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="rgb(125 83 162)" onclick="colorSelectorDivs(this)" style="background-color: rgb(125 83 162); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="#af4e91" onclick="colorSelectorDivs(this)" style="background-color: #af4e91; display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="rgb(81 138 88)" onclick="colorSelectorDivs(this)" style="background-color: rgb(81 138 88); display: inline-block; margin: 5px; cursor: pointer;"></div>
                <div class="color" data-color="#545764" onclick="colorSelectorDivs(this)" style="background-color: #545764; display: inline-block; margin: 5px; cursor: pointer;"></div>
            </div>
        </div>
    </div>
    <header>
            <div class="header-content">
                <h1>Pomodoro</h1>
                <button id="settings">settings</button>  
            </div>
            <div class="pomodoro-progress">
                <div class="progress"></div>
            </div>
    </header>
    <div class="pomodoro-layout">
        <div class="timer-container">
            <div class="timer-background">
                <div class="state-buttons">
                    <button id="workModeBtn">Pomodoro</button>
                    <button id="shortBrakeBtn">Short Brake</button>
                    <button id="longBrakeBtn">Long Brake</button>
                </div>
                <div id="countdownDisplay">00:00</div>
                <div id="smallCountdownDisplay">00</div>
                <div class="controllTime">
                    <button id="timeBtnStart">START</button>
                    <button id="timeBtnPause">PAUSE</button>
                    <button id="timeBtnFF">>|</button>
                </div>
            </div>
        </div>
        <div class="pomodorosCounter">#<p id="pomodorosCounter">1</p></div>
        <div class="current-project-title-container">
            <p id="currentProject">untitled</p>
        </div>
        <div class="task-container" id="container">
            <div class="estimatedPomodorosContainer">
                <p>Pomos : <p class="acumulatedPomodorosDone"></p>/<p class="acumulatedPomodoros"></p></p>
                <p>Finish at : <p class="timeOfFinishingWork"></p></p>
            </div>
            <div class="taskForm">
                <button id="addTaskBtn"><p>+ Add Task</p></button>
                <div id = "addTaskPanel">
                    <div class="taskCreationInputs">
                        <input type="text" id="taskInput" placeholder="What are you working on?">
                        <p>Est. Pomodoros</p>
                        <input type="number" id="amountOfPomodorosInput" placeholder="1" value="1">
                    </div>
                    <div class="taskCreationButtons">
                        <button id="createTask">Save</button>
                        <button id="cancelCreation">Cancel</button>
                    </div>
                </div>
            </div>
            <div id="container-for-tasks">
                
            </div>
            <div id ="title">
                <h3>Tasks</h3>
                <button id="generalTaskSettings">&vellip;</button>
                <div class="generalTaskSettingsScreen">
                    <button id="clearFinishedTasks">Clear finished tasks</button>
                    <button id="clearAllTasks">Clear all tasks</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>

        const timerDisplay = document.getElementById("countdownDisplay")
        const smallTimerDisplay = document.getElementById("smallCountdownDisplay");
        const timeBtnStartMini = document.getElementById("timeBtnStartMini");
        const timeBtnFastFoward = document.getElementById("timeBtnFF");


        window.addEventListener("message", (event)=>{
            if(event.data.type === "TIMER"){
                timerDisplay.innerText = event.data.duration;
            }
        })

        window.addEventListener("message",(event)=>{
            if(event.data.type === "SMALL_TIMER"){
                smallTimerDisplay.innerText = event.data.duration;
            }
        })

        timeBtnStart.addEventListener("click", () => {
            if (window.opener && !window.opener.closed) {
                window.opener.postMessage({type: "START_TIMER"}, "*");
            }
            window.opener.startingCLick.play();
            timeBtnStart.disabled = true;
        });

        document.getElementById("timeBtnPause").addEventListener("click", function () {
            if (window.opener) {
                window.opener.postMessage({ type: "TOGGLE_TIMER" }, "*");
                startingCLick.play();
            }
        });


        timeBtnFastFoward.addEventListener("click", ()=>{
            if(window.opener && !window.opener.closed){
                window.opener.postMessage({type : "FAST_FOWARD"});
            }
        })


    </script>
</body>

</html>
